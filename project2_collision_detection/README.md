# 6172 Project 2: 
This program implements efficient collision detection of line segments for physics engine. The naive approach for detecting collisions is to check all pairs of line segments for collisions on every timestep, but this is an expensive operation.  Therefore, we implemented a quadtree, which recursively separates the environment into quadrants, such that lines in entirely different quadrants need not be compared. We further optimized by creating a fast pass in our collision-detection check using the bounding boxes of line segment, and through the parallelization of our algorithm. We also implemented a reducer for collecting intersection events to parallelize our code, reducing the runtime of our code from 13.3 seconds for 4000 timesteps of mit.in to approximately 4.5 seconds. 

For the final submission, we first removed all references to lines apart from within the detailed collision check, and we instead characterized each line segment by the bounding rectangle for the parallelogram that it sweeps out over a timestep, which we precompute at the beginning of each timestep in collision_world.c.  This provided a speedup of approximately 1.5 times, reducing our time for 4200 timesteps of mit.in from approximately 4.6 seconds to approximately 2.9 seconds.  We further improved our parallelism by rewriting our data structure to eliminate the use of recursive memory allocations (malloc) for both the quadtree nodes and the line segments stored in each quadtree, reducing the runtime for 4200 timesteps of koch.in significantly from 12.4 seconds to 2.4 seconds.  At this point, we were allocating memory at the beginning of each time step, but by simply allocating the memory once, we were able to reduce this same time to 1.69 seconds.  Finally, we modified our recursive intersection detection algorithm through the quadtree at each timestep, switching to a top-down approach and tuning the grainsize for our cilk_for loops, which reduced our serial runtime by about 25%.  Our final submission code runs at roughly 0.88 seconds for 4200 timesteps on mit.in and 1.4 seconds for 4200 timesteps on koch.in.
